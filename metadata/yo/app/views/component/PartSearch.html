<div class="row">

  <!-- Search by input or facet select options -->
  <div class="col-xs-12 col-sm-3">

    <button class="btn btn-warning btn-sm" data-ng-click="clearFilter()" style="margin-bottom: 3px;">
      <i class="fa fa-eraser" aria-hidden="true"></i> <span style="font-family:monospace;font-variant:small-caps;font-stretch:expanded;">RESET FILTER</span>
    </button>
    <div class="form-group">
      <label for="fltrPartNumber" class="sr-only control-label">Part Number</label>
      <input class="form-control input-sm" id="fltrPartNumber" name="fltrPartNumber" type="text" data-ng-model="fltrPart.partNumber" data-ng-model-options="{debounce: 200}" data-ng-keyup="onKeyUpInPartNumber($event)" placeholder="Search part numbers" focus-me="true" autofocus />
    </div>

    <uib-accordion close-others="false">

      <uib-accordion-group heading="Basic attributes" is-open="fltrGroupState.basicAttrsOpened" class="panel-info">

        <div class="form-group">
          <label for="fltrState">
            State
          </label>
          <reset-bttn action="resetState()" />
          <select id="fltrState" name="fltrState" class="form-control input-sm" data-ng-options="itm.val as itm.name + ' (' + itm.count + ')' for itm in stateItems | orderBy: 'name'" data-ng-model="fltrPart.inactive">
            <option></option>
          </select>
        </div>
        <div class="form-group">
          <label for="fltrManufacturer">Manufacturer</label>
          <reset-bttn action="resetManufacturer()" />
          <select id="fltrManufacturer" name="fltrManufacturer" class="form-control input-sm" data-ng-options="itm.key as itm.key + ' (' + itm.doc_count + ')' for itm in searchResults.aggregations['Manufacturer'].buckets | orderBy: 'key'" data-ng-model="fltrPart.manufacturer">
            <option></option>
          </select>
        </div>
        <div class="form-group">
          <label for="fltrName">Name</label>
          <reset-bttn action="resetName()" />
          <input id="fltrName" name="fltrName" class="form-control input-sm" type="text" data-ng-model="fltrPart.name" placeholder="Name..." data-ng-model-options="{debounce: 500}" />
        </div>
        <div class="form-group">
          <label for="fltrInterchangeParts">Interchange Parts</label>
          <reset-bttn action="resetInterchangeParts()" />
          <input id="fltrInterchangeParts" name="fltrInterchangeParts" class="form-control input-sm" type="text" data-ng-model="fltrPart.interchangeParts" placeholder="Part Number..." data-ng-model-options="{debounce: 500}" />
        </div>
        <div class="form-group">
          <label for="fltrPartType">Type</label>
          <reset-bttn action="resetPartType()" />
          <select id="fltrPartType" name="fltrPartType" class="form-control input-sm" data-ng-options="pt.name for pt in partTypes track by pt.id" data-ng-model="fltrPart.partType">
             <option></option>
          </select>
        </div>

      </uib-accordion-group>

      <uib-accordion-group heading="Attributes for Application" is-open="fltrGroupState.appAttrsOpened" class="panel-info">

        <div class="form-group">
          <div angucomplete-alt id="fltrYear"
               placeholder="Search Year"
               minlength="0" maxlength="64" pause="300"
               search-fields="key"
               title-field="key"
               description-field="doc_count"
               input-class="form-control"
               match-class="highlight"
               text-no-results="Not found"
               input-changed="onCmeyYearChanged"
               selected-object="onCmeyYearSelected"
               local-data="searchResults.aggregations['Car Year'].buckets"></div>
        </div>

        <div class="form-group">
          <div angucomplete-alt id="fltrMake"
               placeholder="Search Make"
               minlength="0" maxlength="64" pause="300"
               search-fields="key"
               title-field="key"
               description-field="doc_count"
               input-class="form-control"
               match-class="highlight"
               text-no-results="Not found"
               input-changed="onCmeyMakeChanged"
               selected-object="onCmeyMakeSelected"
               local-data="searchResults.aggregations['Car Make'].buckets"></div>
        </div>

        <div class="form-group">
          <div angucomplete-alt id="fltrModel"
               placeholder="Search Model"
               minlength="0" maxlength="64" pause="300"
               search-fields="key"
               title-field="key"
               description-field="doc_count"
               input-class="form-control"
               match-class="highlight"
               text-no-results="Not found"
               input-changed="onCmeyModelChanged"
               selected-object="onCmeyModelSelected"
               local-data="searchResults.aggregations['Car Model'].buckets"></div>
        </div>

        <div class="form-group">
          <div angucomplete-alt id="fltrEngine"
               placeholder="Search Engine"
               minlength="0" maxlength="64" pause="300"
               search-fields="key"
               title-field="key"
               description-field="doc_count"
               input-class="form-control"
               match-class="highlight"
               text-no-results="Not found"
               input-changed="onCmeyEngineChanged"
               selected-object="onCmeyEngineSelected"
               local-data="searchResults.aggregations['Car Engine'].buckets"></div>
        </div>

        <div class="form-group">
          <div angucomplete-alt id="fltrFuelType"
               placeholder="Search Fuel Type"
               minlength="0" maxlength="64" pause="300"
               search-fields="key"
               title-field="key"
               description-field="doc_count"
               input-class="form-control"
               match-class="highlight"
               text-no-results="Not found"
               input-changed="onCmeyFuelTypeChanged"
               selected-object="onCmeyFuelTypeSelected"
               local-data="searchResults.aggregations['Car Fuel Type'].buckets"></div>
        </div>

      </uib-accordion-group>

      <uib-accordion-group heading="Attributes for Turbo" is-open="fltrGroupState.turboAttrsOpened" is-disabled="fltrPart.partType.id !== 1" class="panel-info">

        <div class="form-group">
          <div angucomplete-alt id="fltrTurboModel"
               placeholder="Search turbo models"
               disable-input="fltrPart.partType.id !== 1"
               minlength="0" maxlength="64" pause="300"
               search-fields="key"
               title-field="key"
               description-field="doc_count"
               input-class="form-control"
               match-class="highlight"
               text-no-results="Not found"
               input-changed="onTurboModelChanged"
               selected-object="onTurboModelSelected"
               local-data="searchResults.aggregations['Turbo Model'].buckets"></div>
        </div>

        <div class="form-group">
          <div angucomplete-alt id="fltrTurboType"
               placeholder="Search turbo types"
               disable-input="fltrPart.partType.id !== 1"
               minlength="0" maxlength="64" pause="300"
               search-fields="key"
               title-field="key"
               description-field="doc_count"
               input-class="form-control"
               match-class="highlight"
               text-no-results="Not found"
               input-changed="onTurboTypeChanged"
               selected-object="onTurboTypeSelected"
               local-data="searchResults.aggregations['Turbo Type'].buckets"></div>
        </div>

      </uib-accordion-group>

      <uib-accordion-group heading="Critical dimensions" is-open="fltrGroupState.critDimsOpened" is-disabled="!isCritDimsForCurrentPartTypeAvailable()" class="panel-info">

        <div class="form-group" data-ng-repeat="cd in critDims">
          <input type="text" placeholder="{{cd.name}}" class="form-control input-sm" data-ng-if="cd.dataType !== 'ENUMERATION'" data-ng-model="fltrPart.critDims[cd.idxName]" data-ng-model-options="{debounce: 500}" />
          <label data-ng-if="cd.dataType == 'ENUMERATION'">{{cd.name}}</label>
          <select class="form-control input-sm" data-ng-options="itm.val for itm in critDimEnumValsMap[cd.enumeration.id].values track by itm.id"  data-ng-model="fltrPart.critDims[cd.idxName]"  data-ng-if="cd.dataType == 'ENUMERATION'">
            <option></option>
          </select>
        </div>

      </uib-accordion-group>

    </uib-accordion>

  </div>

  <!-- Tabular search results -->
  <div class="col-xs-12 col-sm-9">
    <div class="bg-info">
      <form class="form-inline table-top-form" data-ng-show="isCritDimsAvailable()">
        <div data-ng-class="['checkbox', {'disabled': !isCritDimsForCurrentPartTypeAvailable()}]">
          <label data-ng-class="{'text-muted': !isCritDimsForCurrentPartTypeAvailable()}">
            <input type="checkbox" tabindex="-1" data-ng-model="showCriticalDimensions" value="true" data-ng-disabled="!isCritDimsForCurrentPartTypeAvailable()"/>
            Show critical dimensions
          </label>
        </div>
      </form>
      <div style="background-color:white;">
        <table data-ng-table-dynamic="partTableParams with columns" class="table table-condensed table-bordered table-striped" style="background-color:white;">
          <tr data-ng-repeat="$part in $data">
            <td data-ng-repeat="col in $columns" data-title="col.title" data-sortable="col.sortable" data-ng-class="col.cssClass" data-ng-html-compile="col.getter($part)"></td>
          </tr>
          <tr data-ng-hide="$data.length"><td colspan="{{$columns.length}}">No data to display.</td></tr>
        </table>
        <table-summary rowscount="searchResults.hits.total" />
      </div>
    </div>
  </div>

</div>

