<metanav authorize="ROLE_ADMIN" />

<div class="row">

  <div ng-hide="!finished">
    <button ng-click="startSync()" authorize="ROLE_ADMIN" class="btn btn-primary btn-lg active">
      <i class="fa fa-flag"></i> Start
    </button>
    <span style="padding-left:1em;">
      Start synchronization process between ERP (<i>MAS90</i>) and local database.
    </span>
  </div>

  <div ng-hide="finished">
    <uib-progressbar type="info" max="partsUpdateTotalSteps" value="partsUpdateCurrentStep" class="progress-striped active">
      <span style="color:white; white-space:nowrap;">{{partsUpdateCurrentStep}} / {{partsUpdateTotalSteps}}</span>
    </uib-progressbar>
  </div>

</div>

<div class="row" style="margin-top:3em;">

  <h1>History of synchronization</h1>

  <div class="col-xs-12 col-sm-9">
    <table data-ng-table="mas90syncHistoryTableParams" class="table table-bordered table-striped">
      <tr data-ng-repeat="rec in $data">
        <td title="'Started'" class="text-center">{{rec.started | date : "yyyy-MM-dd HH:mm.ss"}}</td>
        <td title="'Finished'" class="text-center">{{rec.finished | date : "yyyy-MM-dd HH:mm.ss"}}</td>
        <td title="'To Process'" class="text-right">{{rec.toProcess}}</td>
        <td title="'Updated'" class="text-right">{{rec.updated}}</td>
        <td title="'Inserted'" class="text-right">{{rec.inserted}}</td>
        <td title="'Started By'"><a ng-href="security/user/{{rec.user.id}}">{{rec.user.name}}</a></td>
        <td title="'Status'" class="text-center">{{rec.status}}</td>
      </tr>
      <tr ng-hide="$data.length > 0">
        <td colspan="7">No records to display.</td>
      </tr>
    </table>
  </div>

</div>
