<metanav>
  <li>
    <a ng-href="#/part/{{ partType }}/{{ partId }}"
       class="btn btn-primary">
      <i class="fa fa-eye"></i>
      View Part
    </a>
  </li>

  <li>
    <a ng-click="save()"
       ng-disabled="pickedPart == null"
       class="btn btn-success">
      <i class="fa fa-save"></i>
      Add BOM Item
    </a>
  </li>
</metanav>

<h1 class="padding-top">{{part.manufacturer.name}} {{part.partType.name}} {{part.manufacturerPartNumber}}</h1>

<div class="row">

  <!-- Add BOM Item -->
  <div class="col-xs-6">
    <h2>Add BOM Item</h2>
    <dl class="dl-horizontal" ng-show="bomItem.child">
      <dt>Manufacturer</dt>
      <dd>
        {{pickedPart.manufacturer.name}}
        <span ng-show="pickedPart.manufacturer.name == null || pickedPart.manufacturer.name == ''">[blank]</span>
      </dd>

      <dt>Part Type</dt>
      <dd>
        {{pickedPart.partType.name}}
      </dd>

      <dt>Manufacturer Part Number</dt>
      <dd>
        {{pickedPart.manufacturerPartNumber}}
        <span ng-show="pickedPart.manufacturerPartNumber == null || pickedPart.manufacturerPartNumber == ''">[blank]</span>
      </dd>

      <dt>Name</dt>
      <dd>
        {{pickedPart.name}}
        <span ng-show="pickedPart.name == null || pickedPart.name == ''">[blank]</span>
      </dd>

      <dt>Quantity</dt>
      <dd><input ng-model="bomItem.quantity" type="text" class="form-control input-sm"/></dd>
    </dl>
    <div ng-hide="bomItem.child" class="well well-sm">
      Pick a part to add to the bill of materials.
    </div>
  </div>

  <!-- Bill of Materials -->
  <div class="col-xs-6">
    <h2>Bill of Materials</h2>
    <table class="table table-bordered table-striped table-hover table-responsive" ng-show="part.bom">
      <thead>
      <tr>
        <th>Manufacturer</th>
        <th>Type</th>
        <th>Part #</th>
        <th>Qty</th>
        <th>Actions</th>
      </tr>
      </thead>
      <tr ng-repeat="bomItem in part.bom">
        <td>
          {{bomItem.child.manufacturer.name}}
        </td>
        <td>
          {{bomItem.child.partType.name}}
        </td>
        <td style="white-space: nowrap;">
          {{bomItem.child.manufacturerPartNumber}}
        </td>
        <td>
          {{bomItem.quantity}}
        </td>
        <td>
          <a authorize="ROLE_READ"
             ng-href="#/part/{{bomItem.child.partType.typeName}}/{{bomItem.child.id}}"
             class="btn btn-primary btn-xs">
            <i class="fa fa-eye"></i>
            View
          </a>
        </td>
      </tr>
    </table>
    <div ng-hide="part.bom">
      No parts in the BOM.
    </div>
  </div>
</div>

<hr/>

<h1>Pick a New BOM Part</h1>
<part-search>

  <a authorize="ROLE_BOM"
     ng-click="pickBomItemPart(partId)"
     class="btn btn-primary btn-xs">
    Pick BOM Part
  </a>

</part-search>
