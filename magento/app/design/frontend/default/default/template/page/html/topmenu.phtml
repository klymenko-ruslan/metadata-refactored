<?php
/**
 * Magento
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Academic Free License (AFL 3.0)
 * that is bundled with this package in the file LICENSE_AFL.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/afl-3.0.php
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magentocommerce.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magentocommerce.com for more information.
 *
 * @category    design
 * @package     base_default
 * @copyright   Copyright (c) 2012 Magento Inc. (http://www.magentocommerce.com)
 * @license     http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
 */
?>
<?php
/**
 * Top menu for store
 *
 * @see Mage_Page_Block_Html_Topmenu
 */
?>
<div class="nav-container">
    <ul id="nav">
        <?php // echo $_menu ?>
        <li>
            <a href="#">Manufacturer</a>
            <ul>
                <?php
                // specify the attribute code
                $attrManufacturer = 'manufacturer';

                // get attribute model by attribute code, e.g. 'color'
                $attributeModel = Mage::getSingleton('eav/config')
                    ->getAttribute('catalog_product', $attrManufacturer);

                // build select to fetch used attribute value id's
                $select = Mage::getSingleton('core/resource')
                    ->getConnection('default_read')->select()
                    ->from($attributeModel->getBackend()->getTable(), 'value')
                    ->where('attribute_id=?', $attributeModel->getId())
                    ->distinct();

                // read used values from the db
                $usedAttributeValues = Mage::getSingleton('core/resource')
                    ->getConnection('default_read')
                    ->fetchCol($select);

                // map used id's to the value labels using the source model
                if ($attributeModel->usesSource())
                {
                    $usedAttributeValues = $attributeModel->getSource()->getOptionText(
                        implode(',', $usedAttributeValues)
                    );
                }

                foreach($usedAttributeValues as $attrValue) {
                    echo "<li><a href='#' style='padding: 5px 15px;'>" . $attrValue . "</a></li>";
                }
                ?>
            </ul>
        </li>
        <li>
            <a href="#">Component</a>
            <ul>
                <?php
                // specify the attribute code
                $attrPartType = 'part_type';

                // get attribute model by attribute code, e.g. 'color'
                $attributeModel = Mage::getSingleton('eav/config')
                    ->getAttribute('catalog_product', $attrPartType);

                // build select to fetch used attribute value id's
                $select = Mage::getSingleton('core/resource')
                    ->getConnection('default_read')->select()
                    ->from($attributeModel->getBackend()->getTable(), 'value')
                    ->where('attribute_id=?', $attributeModel->getId())
                    ->distinct();

                // read used values from the db
                $usedAttributeValues = Mage::getSingleton('core/resource')
                    ->getConnection('default_read')
                    ->fetchCol($select);

                // map used id's to the value labels using the source model
                if ($attributeModel->usesSource())
                {
                    $usedAttributeValues = $attributeModel->getSource()->getOptionText(
                        implode(',', $usedAttributeValues)
                    );
                }

                foreach($usedAttributeValues as $attrValue) {
                    echo "<li><a href='#' style='padding: 5px 15px;'>" . $attrValue . "</a></li>";
                }
                ?>
            </ul>
        </li>
        <li><a href="/application-finder">Applications</a></li>
        <li><a href="#">Clearance</a></li>
        <li><a href="#">Catalog</a></li>
        <li><a href="/about-us">About Us</a></li>
        <li><a href="/contacts">Contact Us</a></li>
        <li><a href="/customer/account/login">Login</a></li>
    </ul>
</div>
