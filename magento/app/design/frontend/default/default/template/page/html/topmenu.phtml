<?php
/**
 * Magento
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Academic Free License (AFL 3.0)
 * that is bundled with this package in the file LICENSE_AFL.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/afl-3.0.php
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magentocommerce.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magentocommerce.com for more information.
 *
 * @category    design
 * @package     base_default
 * @copyright   Copyright (c) 2012 Magento Inc. (http://www.magentocommerce.com)
 * @license     http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
 */
?>
<?php
/**
 * Top menu for store
 *
 * @see Mage_Page_Block_Html_Topmenu
 */

$amshopbyAttrHelper = Mage::helper('amshopby/attributes');
$amshopbyUrlHelper = Mage::helper('amshopby/url');
?>

<div class="nav-container">
    <ul id="nav">
        <?php // echo $_menu 
            // create array of each manufacturer
            $manfrArray = array();
            foreach ($amshopbyAttrHelper->getAttributeOptions('manufacturer') as $item) {
                    $manfrArray[] = array("url" => $amshopbyUrlHelper->getOptionUrl('manufacturer', $item['label'], $item['value']), "label" => $item['label']);
            }

            // create array of part types
            $partTypeArray = array();
            foreach ($amshopbyAttrHelper->getAttributeOptions('part_type') as $item) {
                    $partTypeArray[] = array("url" => $amshopbyUrlHelper->getOptionUrl('part_type', $item['label'], $item['value']), "label" => $item['label']);
            }
        ?>
        <li>
            <a href="#">Manufacturer</a>
            <ul>
                <?php foreach ($manfrArray as $manfrItem): ?>
                    <li>
                        <a href="#"><?php echo $manfrItem['label'] ?></a>
                        <ul>
                            <?php foreach ($partTypeArray as $partTypeItem): ?>
                                <li>
                                    <a href="<?php echo $manfrItem['url'] . '&' . parse_url($partTypeItem['url'], PHP_URL_QUERY) ?>"><?php echo $partTypeItem['label'] ?></a>
                                </li>
                            <?php endforeach ?>
                        </ul>
                    </li>
                <?php endforeach ?>
            </ul>
        </li>
        <li>
            <a href="#">Component</a>
            <ul>
                <?php foreach ($partTypeArray as $partTypeItem): ?>
                    <li>
                        <a href="<?php echo $partTypeItem['url'] ?>"><?php echo $partTypeItem['label'] ?></a>
                    </li>
                <?php endforeach ?>
            </ul>
        </li>
        <li><a href="/applications">Applications</a></li>
        <li><a href="/clearance?mode=grid">Clearance</a></li>
        <li><a href="/shopby?mode=list">Catalog</a></li>
        <li><a href="/about-us">About Us</a></li>
        <li><a href="/contact-us">Contact Us</a></li>
        <li><a href="/customer/account/login">Login</a></li>
    </ul>
</div>
