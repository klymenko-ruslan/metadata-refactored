<?xml version="1.0"?>
<layout>
    <default>
        <reference name="head">
            <action method="addCss"><stylesheet>css/amshopby.css</stylesheet></action>
        </reference>
    </default>

    <amshopby_index_index>
        <!-- feel free remove that if you need to use default page layout -->
        <reference name="root">
           <action method="setTemplate"><template>page/2columns-left.phtml</template></action>
        </reference>

        <reference name="left">
           <block type="amshopby/catalog_layer_view" name="amshopby.navleft" before="-" template="catalog/layer/view.phtml"/>
        </reference>
        <reference name="left">
            <block type="amfinder/form" name="productfinder" after="amshopby.navleft">
                <action method="setId">
                    <id>1</id>
                </action>
                <action method="apply"/>
            </block>
        </reference>
        <reference name="left">
            <block type="checkout/cart_sidebar" name="left_cart_sidebar" template="checkout/cart/sidebar.phtml" after="-"/>
            <block type="wishlist/customer_sidebar" name="left_wishlist_sidebar" template="wishlist/sidebar.phtml" after="left_cart_sidebar"/>
            <block type="catalog/product_compare_sidebar" name="left.catalog.compare.sidebar" template="catalog/product/compare/sidebar.phtml" after="left_wishlist_sidebar"/>
            <block type="reports/product_viewed" name="left.reports.product.viewed" template="reports/product_viewed.phtml" after="left.catalog.compare.sidebar"/>
            <block type="reports/product_compared" name="left.reports.product.compared" template="reports/product_compared.phtml" after="left.reports.product.compared"/>
            <block type="sales/reorder_sidebar" name="left.sale.reorder.sidebar" template="sales/reorder/sidebar.phtml"/>
            <block type="poll/activePoll" name="left.poll">
              <action method="setPollTemplate">
                 <template>poll/active.phtml</template>
                 <type>poll</type>
              </action>
              <action method="setPollTemplate">
                 <template>poll/result.phtml</template>
                 <type>results</type>
              </action>
            </block>
        </reference>
        <reference name="content">
            <block type="amshopby/catalog_layer_view_top" name="amshopby.navtop" template="amshopby/view_top.phtml"/>
            <block type="catalog/category_view" name="category.products" template="catalog/category/view.phtml">
                <block type="catalog/product_list" name="product_list" template="catalog/product/list.phtml">
                    <block type="catalog/product_list_toolbar" name="product_list_toolbar" template="catalog/product/list/toolbar.phtml">
                        <block type="page/html_pager" name="product_list_toolbar_pager"/>
                    </block>
                    <action method="setToolbarBlockName"><name>product_list_toolbar</name></action>
                    <action method="setColumnCount"><coulumn>4</coulumn></action>
                </block>
            </block>
    		<block type="amshopby/top" name="amshopby.top" before="category.products" template="amshopby/top.phtml"/>
        </reference>
    </amshopby_index_index>

    <catalog_category_layered> 
        <remove name="catalog.leftnav" />
        <remove name="enterprisecatalog.leftnav"/> 
        <reference name="left">
           <block type="amshopby/catalog_layer_view" name="amshopby.navleft" before="-" template="catalog/layer/view.phtml"/> 
        </reference>
        <reference name="left">
            <block type="amfinder/form" name="productfinder" after="-">
                <action method="setId">
                    <id>1</id>
                </action>
                <action method="apply"/>
            </block>
        </reference>
        <reference name="content">
                <block type="amshopby/catalog_layer_view_top" name="amshopby.navtop" before="-" template="amshopby/view_top.phtml"/>
                <block type="amshopby/top" name="amshopby.top" before="category.products" template="amshopby/top.phtml"/>
        </reference>
    </catalog_category_layered> 

    
    <catalogsearch_result_index>
        <reference name="root">
            <action method="setTemplate"><template>page/2columns-left.phtml</template></action>
        </reference>
        <remove name="catalogsearch.leftnav" />
        <remove name="enterprisesearch.leftnav"/> 
        
        <reference name="left">
           <block type="amshopby/search_layer" name="amshopby.navleft" before="-" template="catalog/layer/view.phtml"/> 
        </reference>
        <reference name="left">
            <block type="amfinder/form" name="productfinder" after="-">
                <action method="setId">
                    <id>1</id>
                </action>
                <action method="apply"/>
            </block>
        </reference>
        <reference name="left">
            <block type="checkout/cart_sidebar" name="left_cart_sidebar" template="checkout/cart/sidebar.phtml" after="-"/>
            <block type="wishlist/customer_sidebar" name="left_wishlist_sidebar" template="wishlist/sidebar.phtml" after="left_cart_sidebar"/>
            <block type="catalog/product_compare_sidebar" name="left.catalog.compare.sidebar" template="catalog/product/compare/sidebar.phtml" after="left_wishlist_sidebar"/>
            <block type="reports/product_viewed" name="left.reports.product.viewed" template="reports/product_viewed.phtml" after="left.catalog.compare.sidebar"/>
            <block type="reports/product_compared" name="left.reports.product.compared" template="reports/product_compared.phtml" after="left.reports.product.compared"/>
            <block type="sales/reorder_sidebar" name="left.sale.reorder.sidebar" template="sales/reorder/sidebar.phtml"/>
            <block type="poll/activePoll" name="left.poll">
              <action method="setPollTemplate">
                 <template>poll/active.phtml</template>
                 <type>poll</type>
              </action>
              <action method="setPollTemplate">
                 <template>poll/result.phtml</template>
                 <type>results</type>
              </action>
            </block>
        </reference>
        <reference name="content">
                <block type="amshopby/search_layer_top" name="amshopby.navtop" before="search.result" template="amshopby/view_top.phtml"/>
        </reference>
    </catalogsearch_result_index>   

<!-- comment out to show navigation on the product pages
     <catalog_product_view>
        <reference name="right">
           <block type="amshopby/catalog_layer_view" name="catalog.navleft" before="-" template="catalog/layer/view.phtml">
                <action method="setIsProductPage"><flag>1</flag></action>
           </block> 
        </reference>
     </catalog_product_view>
-->
    
</layout>
